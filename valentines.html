<!DOCTYPE html>
<html>
<head>
  <title>My Valentine</title>
  <meta charset="UTF-8">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Gravitas+One&family=Pacifico&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      overflow-x: hidden;
      position: relative;
      cursor: none; /* Скрыт изначально */
    }

    h1 {
      margin-top: 150px;
      font-family: "Gravitas One", serif;
      font-size: 80px;
      color: #6D2932;
      text-align: center;
      z-index: 10;
    }

    /* Анимация плавающих 3D сердечек */
    @keyframes float-glass {
      0%, 100% { transform: translateY(0) rotate(var(--rot)); }
      50% { transform: translateY(-20px) rotate(calc(var(--rot) + 5deg)); }
    }

    .heart-3d, .heart2-3d, .heart3-3d, .heart4-3d, .heart5-3d {
      position: fixed;
      z-index: 500;
      opacity: 0.7;
      pointer-events: none;
      filter: drop-shadow(0 10px 15px rgba(0,0,0,0.1));
      animation: float-glass 6s ease-in-out infinite;
    }

    .heart-3d  { top: 5%; left: -2%; width: 18vw; --rot: -15deg; }
    .heart2-3d { top: 15%; right: 5%; width: 12vw; --rot: 25deg; animation-delay: 1s; }
    .heart3-3d { top: 45%; left: 3%; width: 15vw; --rot: 20deg; animation-delay: 2s; }
    .heart4-3d { bottom: 5%; right: -3%; width: 22vw; --rot: -20deg; animation-delay: 0.5s; }
    .heart5-3d { bottom: 10%; left: 10%; width: 10vw; --rot: -10deg; animation-delay: 1.5s; }

    .image-as-button {
      background: none;
      border: none;
      padding: 0;
      display: block;
      margin: 20px auto;
      transition: transform 0.3s ease;
      position: relative;
      z-index: 1000;
    }

    .image-as-button:hover { transform: scale(1.05); }
    .valentine-cat { width: 400px; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }

    #heart-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; }
    .heart { position: absolute; color: #ff4d6d; font-size: 20px; animation: fall linear forwards; }

    @keyframes fall {
      0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
      100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
    }

    #reason-text {
      font-family: "Gravitas One", serif;
      font-size: 50px;
      color: #6D2932;
      display: inline-block;
      padding-right: 5px;
      animation: blink 0.7s infinite;
      min-height: 45px;
      white-space: pre-wrap;
      max-width: 80%;
      position: relative;
      z-index: 1001;
    }

    @keyframes blink { 0%, 100% { border-color: transparent; } 50% { border-color: #6D2932; } }

    .final-love {
      font-family: "Gravitas One", serif;
      font-size: 100px;
      color: #6D2932;
      text-shadow: 5px 5px 20px rgba(255, 77, 109, 0.4);
      animation: fadeIn 2s forwards;
      position: absolute;
      top: 35%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      width: 100%;
      z-index: 11000;
    }

    #final-images-container {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      z-index: 10500;
      display: none;
    }

    .final-image, .kub-image, .anna-image, .us-image {
      position: absolute;
      opacity: 0;
      animation: finalImageFadeIn 2s forwards;
      filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2));
    }

    @keyframes finalImageFadeIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</head>
<body>

  <h1 id="main-title">Happy Valentine's Day</h1>

  <div id="heart-container"></div>

  <button class="image-as-button" onclick="startSurprise()">
    <img src="pic.jpg" alt="Valentine Cat" class="valentine-cat">
  </button>

  <div style="text-align: center; width: 100%;">
    <p id="reason-text"></p>
    <img src="heart3d.png" class="heart-3d">
    <img src="heart3d.png" class="heart2-3d">
    <img src="heart3d.png" class="heart3-3d">
    <img src="heart3d.png" class="heart4-3d">
    <img src="heart3d.png" class="heart5-3d">
  </div>

  <div id="final-images-container">
    <img src="Objekt.png" class="final-image" style="top: 60%; left: 35%; width: 400px;">
    <img src="kub.png" class="kub-image" style="top: 10%; left: 15%; width: 150px;">
    <img src="anna.png" class="anna-image" style="top: 15%; left: 25%; width: 200px;">
    <img src="us.png" class="us-image" style="top: 10%; left: 65%; width: 250px;">
  </div>

  <script>
    const reasons = [
      "You have the cutest smile",
      "You always know how to make me laugh",
      "I feel very comfortable with you",
      "Waking up with you is the best feeling",
      "I love watching movies with you",
      "You are the best support",
      "You are so incredibly funny",
      "You are so caring and attentive",
      "Even being silent with you is a joy",
      "You are my best friend and my true love"
    ];

    let currentReason = 0;
    let isTyping = false;
    let firstClick = true;

    function createHeart() {
      const container = document.getElementById('heart-container');
      const heart = document.createElement('div');
      heart.classList.add('heart');
      heart.innerHTML = '❤️';
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.fontSize = Math.random() * 20 + 15 + 'px';
      const duration = Math.random() * 3 + 3;
      heart.style.animationDuration = duration + 's';
      container.appendChild(heart);
      setTimeout(() => heart.remove(), duration * 1000);
    }

    window.onload = function() {
      setInterval(createHeart, 400);
    };

    function startSurprise() {
      // ВОЗВРАЩАЕМ КУРСОР ПРИ КЛИКЕ
      document.body.style.cursor = 'default';
      
      for(let i=0; i<15; i++) setTimeout(createHeart, i*100);
      showNextReason();
    }

    function showNextReason() {
      if (isTyping) return;

      if (firstClick) {
        document.getElementById('main-title').style.display = 'none';
        document.querySelector('.image-as-button').style.display = 'none';
        document.getElementById('reason-text').style.marginTop = "35vh";
        
    document.getElementById('reason-text').style.borderRight = "3px solid #6D2932";
    document.getElementById('reason-text').style.animation = "blink 0.7s infinite";
        firstClick = false;
      }

      if (currentReason >= reasons.length) {
        showFinalMessage();
        return;
      }

      const textElement = document.getElementById('reason-text');
      const fullText = reasons[currentReason];
      textElement.textContent = "";
      isTyping = true;

      let i = 0;
      function type() {
        if (i < fullText.length) {
          textElement.textContent += fullText.charAt(i);
          i++;
          setTimeout(type, 100);
        } else {
          isTyping = false;
          currentReason++;
          setTimeout(showNextReason, 1500);
        }
      }
      type();
    }

    function showFinalMessage() {
      document.getElementById('reason-text').style.display = 'none';

      const final = document.createElement('h1');
      final.innerHTML = "I love you";
      final.classList.add('final-love');
      document.body.appendChild(final);

      const finalImagesContainer = document.getElementById('final-images-container');
      finalImagesContainer.style.display = 'block';

      setInterval(createHeart, 100);
    }
  </script>
</body>
</html>